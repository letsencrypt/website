---
title: כיצד זה עובד
linkTitle: כיצד Let's Encrypt עובד
slug: how-it-works
lastmod: 2025-08-02
show_lastmod: 1
---

המטרה של Let's Encrypt ושל [פרוטוקול ACME](https://tools.ietf.org/html/rfc8555) היא לאפשר להקים שרת HTTPS ושהוא ימשוך אוטומטית אישורים מהימנים מבחינת הדפדפן, ללא התערבות של בן אדם. אפשר להשיג את זה על ידי הרצת לקוח ACME על שרת אתר.

כדי להבין איך הטכנולוגיה הזו עובדת, הבה נעבור על תהליך הגדרת `https://example.com/` עם לקוח ACME.

לתהליך זה שני שלבים. קודם, לקוח ה־ACME מוכיח ל[רשות האישורים](https://wikipedia.org/wiki/Certificate_authority) (CA) שהשרת שולט בשם התחום. לאחר מכן הלקוח יכול לבקש או לשלול אישורים לשם התחום הזה.

## תיקוף שם תחום

Let's Encrypt מזהה את תוכנת לקוח ה־ACME באמצעות [מפתח ציבורי](https://he.wikipedia.org/wiki/מפתח_ציבורי). בפעם הראשונה שלקוח ה־ACME יוצר קשר עם Let'sEncrypt הוא מייצר צמד מפתחות חדש לחשבון ומוכיח לרשות האישורים Let'sEncrypt שלמפעיל יש שליטה בשם תחום אחד או יותר. בדומה לתהליך המסורתי מול רשות אישורים שכרוך ביצירת חשבון והוספת שמות תחום לחשבון הזה.

כדי להניע את התהליך, הלקוח מבקש מרשות האישורים Let's Encrypt את מה שדרוש לו כדי להוכיח שהוא שולט ב־`example.com`. רשות האישורים Let's Encrypt תסתכל על שם התחום שבבקשה ותנפיק סדרת אתגרים אחת או יותר. יש דרכים שונות שבהן יכול הלקוח להוכיח שיש לו שליטה על שם התחום. למשל, רשות האישורים יכולה לתת ללקוח לבחור בין:

* להקים רשומת DNS תחת `example.com`, או
* להקים משאב HTTP תחת כתובת פנימית (URI) מוכרת `http://example.com/‎`

<div class="howitworks-figure">
<img alt="בקשת אתגרים לתיקוף example.com"
     src="/images/howitworks_challenge.png"/>
</div>

תכנית הלקוח משלימה את אחת מסדרות האתגרים שסופקו. נניח שהוא מצליח להשלים את המשימה השנייה שלעיל: הסוכן יוצר קובץ תחת נתיב מסוים באתר `http://example.com`. לאחר שהלקוח השלים את הצעדים האלה, הוא מודיע לרשות האישורים שהוא מוכן להשלים את התיקוף.

לאחר מכן, זאת המשימה של רשות האישורים לבדוק שהאתגרים הושלמו בהצלחה מ[מגוון היבטי רשת](/2020/02/19/multi-perspective-validation).

<div class="howitworks-figure">
<img alt="בקשת הרשאה כדי לפעול עבור example.com"
     src="/images/howitworks_authorization.png"/>
</div>

לאחר השלמת האתגרים בהצלחה, הלקוח שמזוהה על ידי המפתח הציבורי מורשה לבצע ניהול אישורים עבור `example.com`.

נא לשים לב שהתהליך הזה לא יכול להשתמש ב־HTTPS, מה שהופך אותו לפגיע למתקפות מסוימות. כדי למזער את הבעיה הזאת, המנגנון של Let's Encrypt מבצע למעשה מגוון אימותים במקביל ממגוון היבטי רשת. ההתנהלות הזאת מקשה מאוד על תוקפים להטות את תהליך התיקוף.

## הנפקה ושלילה של אישורים

לאחר שהלקוח קיבל אישור, בקשה, חידוש ושלילה של אישורים היא פשוטה - צריך פשוט לשלוח הודעות ניהול אישורים ולחתום עליהן עם חשבון צמד המפתחות המורשה.

### הנפקה

כדי להשיג אישור עבור שם התחום, הלקוח מרכיב [בקשת חתימת אישור - Certificate Signing Request ‏(CSR)](https://tools.ietf.org/html/rfc2986) בתצורת PKCS#10 שמבקשת מרשות האישורים Let'sEncrypt להנפיק אישור עבור `example.com` עם מפתח ציבורי מסוים. כרגיל, ה־CSR כולל חתימה במפתח הפרטי שתואם למפתח הציבורי שב־CSR. הלקוח גם חותם על כל ה־CSR עם המפתח המורשה עבור `example.com` כדי שרשות האישורים Let'sEncrypt תדע שהוא מורשה.

כאשר רשות האישורים Let'sEncrypt מקבלת את האישור, היא מאמתת את שתי החתימות. אם הכול נראה טוב, היא מנפיקה אישור עבור `example.com` עם המפתח הציבורי מתוך בקשת חתימת האישור (CSR) ומחזירה אותו אל הלקוח. רשות האישורים גם תגיש את האישור למגוון יומני שקיפות אישורים (CT) ציבוריים. לפרטים נוספים ניתן לגשת ל[כאן](https://certificate.transparency.dev/howctworks/#pki).

<div class="howitworks-figure">
<img alt="בקשת אישור עבור example.com"
     src="/images/howitworks_certificate.png"/>
</div>

חידוש אישור במועד מאוחר יותר משמעותו חזרה על תהליך ההנפקה מההתחלה - ביצוע אימות שם תחום ואז בקשת אישור חדש.

### שלילה

השלילה עובדת באופן דומה. הלקוח חותם על בקשת שלילה עם חשבון צמד המפתחות שמורשים עבור `example.com`, ורשות האישורים Let'sEncrypt מוודאה שהבקשה מורשית. אם התהליך צלח, פרטי השלילה מפורסמים דרך [רשימת שלילת אישורים](https://en.wikipedia.org/wiki/Certificate_revocation_list) (CRL), כך שגופים נסמכים כגון דפדפנים יכולים לדעת שהם לא אמורים לקבל את האישור שנשלל.

<div class="howitworks-figure">
<img alt="בקשת שלילת אישור עבור example.com"
     src="/images/howitworks_revocation.png"/>
</div>
