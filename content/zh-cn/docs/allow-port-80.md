---
title: 最佳实践 - 保持80端口打开
permalink: /docs/allow-port-80
top_graphic: 1
date: 2019-01-24
lastmod: 2019-01-24
---

{{< lastmod >}}

我们偶尔会收到一些关于`HTTP-01 challenge`的问题报告，这是因为管理员在防火墙中限制了80端口。
我们建议所有web服务器都开放HTTP的80端口和HTTPS的443端口，同时还应该重定向所有对80端口的请求，
并尽量在443端口的请求响应中添加HSTS首部。

开放80端口不会给服务器带来更多的风险，因为80端口的请求一般也会由运行在443端口的软件进行处理。

关闭80端口并不会降低通过HTTP意外访问你网站的风险。在正常情况下，用户将被重定向到HTTPS，并且后续的通讯数据将会被保护。
如果一个用户受到中间人攻击的影响，攻击者将在80端口进行响应，而你的网站永远不会产生"connection refused."响应。

最后，打开80端口能够帮助用户链接到你网站正确的版本（或者HTTPS版本）。在一些你无法控制的情况，有些人可能短暂地使用
您站点的HTTP版本，例如，邮件中的链接或者手动输入域名。最好是让他们链接到你的网址，否则会出错。

不幸地是，你可能无法决定自己站点的80端口是否被占用。由于各种原因，一些ISP（主要是住宅区）限制了80端口。
如果你的ISP真的这么做了，并且你仍希望从 Let's Encrypt 获取证书，你有两个选择：
  1. 你可以使用`DNS-01 challenge`。
  1. 你可以使用[支持 `TLS-ALPN-01 challenge` 的客户端](https://community.letsencrypt.org/t/which-client-support-tls-alpn-challenge/75859/2)（部署在443端口）
